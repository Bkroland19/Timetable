<div class="text-center font-bold text-2xl p-2">
  School TimeTable Prototype Generator
</div>

<section id="section1" class="flex mt-10 justify-center items-center">
  <div class="flex flex-col w-1/2  shadow-lg">

    <div class="flex justify-between">
      <div><span class="text-xl p-2">School:</span> <span class="text-2xl p-1">{{school.name | titlecase}}</span></div>
      <div><span class="text-xl p-2">Academic Term:</span> <span class="text-2xl p-1">TermIII</span> </div>
    </div>

    <div class="flex justify-between">
      <div><span class="text-xl p-2">Region: </span> <span class="text-2xl p-1">Buganda South</span> </div>
      <div><span class="text-xl p-2">LocalGovernment: </span> <span class="text-2xl p-1">Kira Municipality</span></div>
    </div>
  </div>
</section>

<div class="flex justify-center items-center mt-1 space-x-4 p-2">
  <div>
    <input type="file" appTimetableExcelUploader class="w-0" #uploadField (isUploadingEvent)="isUploadingEvent($event)"
      accept=".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"
      (excelDataEvent)="excelData($event)" [formControl]="uploadControl" />


    <button mat-raised-button [disabled]="isUploading" (click)="uploadField.click()" cdkFocusInitial color="primary"
      matTooltip="select file to upload">
      <mat-icon>upload_file</mat-icon>
      Upload Timetable
    </button>
  </div>

  <a mat-raised-button [disabled]="isUploading" href="../assets/SampleSchoolTimetable.xlsx" color="primary"
    [download]="school.name+' Timetable.xlsx'" matTooltip="Supported formats are csv and excel">
    <mat-icon>download</mat-icon>
    Download Timetable Template
  </a>

  <button mat-raised-button color="accent">Save Timetable</button>

</div>



<section class="container mx-auto mt-8 mb-20 shadow-md">
  <mat-tab-group mat-align-tabs="start">
    <mat-tab [label]="timetable.schoolClass.name" *ngFor="let timetable of timeTableExcels">
      <div id="pdfPage">
        <table class="border-separate border-spacing-2 border border-slate-400 w-full">

          <caption class="caption-top text-xl p-2">
            {{timetable.schoolClass.name|titlecase}} TimeTable
          </caption>

          <thead>
            <tr>
              <th class="border border-slate-600">Time</th>
              <th class="border border-slate-600">Monday</th>
              <th class="border border-slate-600">Tuesday</th>
              <th class="border border-slate-600">Wednesday</th>
              <th class="border border-slate-600">Thursday</th>
              <th class="border border-slate-600">Friday</th>
            </tr>
          </thead>



          <tbody>
            <tr *ngFor="let row of timetable.rows" class="text-center">
              <td class="border border-slate-200">{{row.TIME}}</td>
              <td class="border border-slate-200">
                <div>
                  <div class="font-bold text-xl">{{(row.MONDAY|valueSplitter:':').length>0 ?
                    (row.MONDAY|valueSplitter:':')[0] : ""}}</div>
                  <div class="text-lg">{{(row.MONDAY|valueSplitter:':').length >= 1 ? (row.MONDAY|valueSplitter:':')[1]
                    : ""}}</div>
                </div>
              </td>

              <td class="border border-slate-200">
                <div>
                  <div class="font-bold text-xl">{{(row.TUESDAY|valueSplitter:':').length>0 ?
                    (row.TUESDAY|valueSplitter:':')[0] : ""}}</div>
                  <div class="text-lg">{{(row.TUESDAY|valueSplitter:':').length >= 1 ?
                    (row.TUESDAY|valueSplitter:':')[1] : ""}}</div>
                </div>
              </td>


              <td class="border border-slate-200">
                <div>
                  <div class="font-bold text-xl">{{(row.WEDNESDAY|valueSplitter:':').length>0 ?
                    (row.WEDNESDAY|valueSplitter:':')[0] : ""}}</div>
                  <div class="text-lg">{{(row.WEDNESDAY|valueSplitter:':').length >= 1 ?
                    (row.WEDNESDAY|valueSplitter:':')[1] : ""}}</div>
                </div>
              </td>

              <td class="border border-slate-200">
                <div>
                  <div class="font-bold text-xl">{{(row.THURSDAY|valueSplitter:':').length>0 ?
                    (row.THURSDAY|valueSplitter:':')[0] : ""}}</div>
                  <div class="text-lg">{{(row.THURSDAY|valueSplitter:':').length >= 1 ?
                    (row.THURSDAY|valueSplitter:':')[1] : ""}}</div>
                </div>
              </td>

              <td class="border border-slate-200">
                <div>
                  <div class="font-bold text-xl">{{(row.FRIDAY|valueSplitter:':').length>0 ?
                    (row.FRIDAY|valueSplitter:':')[0] : ""}}</div>
                  <div class="text-lg">{{(row.FRIDAY|valueSplitter:':').length >= 1 ? (row.FRIDAY|valueSplitter:':')[1]
                    : ""}}</div>
                </div>
              </td>

            </tr>


          </tbody>
        </table>
      </div>
    </mat-tab>

    <mat-tab [label]="school.name+ ' Timetables'"  *ngIf="timeTableExcels.length>0">
      <div id="pdfPage" class="mb-10" *ngFor="let timetable of timeTableExcels">
        <table class="border-separate border-spacing-2 border border-slate-400 w-full">

          <caption class="caption-top text-xl p-2">
            {{timetable.schoolClass.name|titlecase}} TimeTable
          </caption>

          <thead>
            <tr>
              <th class="border border-slate-600">Time</th>
              <th class="border border-slate-600">Monday</th>
              <th class="border border-slate-600">Tuesday</th>
              <th class="border border-slate-600">Wednesday</th>
              <th class="border border-slate-600">Thursday</th>
              <th class="border border-slate-600">Friday</th>
            </tr>
          </thead>



          <tbody>
            <tr *ngFor="let row of timetable.rows" class="text-center">
              <td class="border border-slate-200">{{row.TIME}}</td>
              <td class="border border-slate-200">
                <div>
                  <div class="font-bold text-xl">{{(row.MONDAY|valueSplitter:':').length>0 ?
                    (row.MONDAY|valueSplitter:':')[0] : ""}}</div>
                  <div class="text-lg">{{(row.MONDAY|valueSplitter:':').length >= 1 ? (row.MONDAY|valueSplitter:':')[1]
                    : ""}}</div>
                </div>
              </td>

              <td class="border border-slate-200">
                <div>
                  <div class="font-bold text-xl">{{(row.TUESDAY|valueSplitter:':').length>0 ?
                    (row.TUESDAY|valueSplitter:':')[0] : ""}}</div>
                  <div class="text-lg">{{(row.TUESDAY|valueSplitter:':').length >= 1 ?
                    (row.TUESDAY|valueSplitter:':')[1] : ""}}</div>
                </div>
              </td>


              <td class="border border-slate-200">
                <div>
                  <div class="font-bold text-xl">{{(row.WEDNESDAY|valueSplitter:':').length>0 ?
                    (row.WEDNESDAY|valueSplitter:':')[0] : ""}}</div>
                  <div class="text-lg">{{(row.WEDNESDAY|valueSplitter:':').length >= 1 ?
                    (row.WEDNESDAY|valueSplitter:':')[1] : ""}}</div>
                </div>
              </td>

              <td class="border border-slate-200">
                <div>
                  <div class="font-bold text-xl">{{(row.THURSDAY|valueSplitter:':').length>0 ?
                    (row.THURSDAY|valueSplitter:':')[0] : ""}}</div>
                  <div class="text-lg">{{(row.THURSDAY|valueSplitter:':').length >= 1 ?
                    (row.THURSDAY|valueSplitter:':')[1] : ""}}</div>
                </div>
              </td>

              <td class="border border-slate-200">
                <div>
                  <div class="font-bold text-xl">{{(row.FRIDAY|valueSplitter:':').length>0 ?
                    (row.FRIDAY|valueSplitter:':')[0] : ""}}</div>
                  <div class="text-lg">{{(row.FRIDAY|valueSplitter:':').length >= 1 ? (row.FRIDAY|valueSplitter:':')[1]
                    : ""}}</div>
                </div>
              </td>

            </tr>


          </tbody>
        </table>
      </div>
    </mat-tab>
  </mat-tab-group>
</section>
